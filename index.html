<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>to Trish🌹 from Ryan</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
	
<script>
const canvas = document.getElementById("heartCanvas");
const ctx = canvas.getContext("2d");
const label = document.getElementById("label");
const song = document.getElementById("song");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let cx = canvas.width/2, cy = canvas.height/2;

const PARTICLES = 800;
const SIZE = 15;
const DURATION = 8000;

function heartPoint(t, scale=SIZE) {
  let x = 16*Math.pow(Math.sin(t),3);
  let y = 13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t);
  return {x:x*scale, y:-y*scale};
}

function randomStart() {
  const side = Math.floor(Math.random()*4);
  const w = canvas.width, h = canvas.height, m = 200;
  if (side===0) return {x:Math.random()*w,y:-m};
  if (side===1) return {x:w+m,y:Math.random()*h};
  if (side===2) return {x:Math.random()*w,y:h+m};
  return {x:-m,y:Math.random()*h};
}

// Particles setup
let particles=[];
for(let i=0;i<PARTICLES;i++){
  let t = Math.random()*Math.PI*2;
  let outline = heartPoint(t);
  let s = Math.pow(Math.random(),0.5);
  let target = { x: outline.x*s, y: outline.y*s };
  let start = randomStart();
  particles.push({
    sx:start.x, sy:start.y,
    tx:cx+target.x, ty:cy+target.y,
    color:Math.random()>0.5?"cyan":"red",
    delay:Math.random()*DURATION*0.5,
    time:DURATION*(0.5+Math.random()*0.5),
    phase:Math.random()*Math.PI*2
  });
}

let startTime=null;
let heartSettledTime = null;
let heartIsSettled = false;
let heartShrinkStarted = false;
let heartShrinkStartTime = null;

let heartScale = 1;
let heartOffsetX = 0, heartOffsetY = 0;

function animate(time){
  if(!startTime) startTime=time;
  let elapsed=time-startTime;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Check if all particles settled
  if (!heartIsSettled) {
    let allDone = true;
    for(let p of particles){
      let local=elapsed-p.delay;
      let prog=Math.min(Math.max(local/p.time,0),1);
      if(prog<1) { allDone = false; break; }
    }
    if (allDone) {
      heartIsSettled = true;
      heartSettledTime = time;
    }
  }

  // After 2s of settling, begin shrink/move
  if (heartIsSettled && !heartShrinkStarted && time - heartSettledTime > 2000) {
    heartShrinkStarted = true;
    heartShrinkStartTime = time;
  }

  // Animate shrink and move
  if (heartShrinkStarted) {
    let t = Math.min((time - heartShrinkStartTime) / 1200, 1); // 1.2s transition
    // Shrink to 0.25x, move to bottom right
    heartScale = 1 - t * 0.75;
    // Bottom right margin
    let offsetX = (canvas.width/2 - 120) - cx;
    let offsetY = (canvas.height/2 - 120) - cy;
    heartOffsetX = t * offsetX;
    heartOffsetY = t * offsetY;
  } else {
    heartScale = 1;
    heartOffsetX = 0;
    heartOffsetY = 0;
  }

  for(let p of particles){
    let local=elapsed-p.delay;
    let prog=Math.min(Math.max(local/p.time,0),1);
    let ease=1-Math.pow(1-prog,3);
    let x=p.sx+(p.tx-p.sx)*ease;
    let y=p.sy+(p.ty-p.sy)*ease;
    if(prog>=1){
      x+=Math.sin(time*0.005+p.phase)*1.5;
      y+=Math.cos(time*0.004+p.phase)*1.5;
    }
    let alpha=0.7+0.3*Math.sin(time*0.005+p.phase);

    // Apply heart move/scale
    let drawX = (x - cx) * heartScale + cx + heartOffsetX;
    let drawY = (y - cy) * heartScale + cy + heartOffsetY;

    ctx.beginPath();
    ctx.arc(drawX, drawY, 2.3 * heartScale, 0, Math.PI*2);
    ctx.fillStyle=(p.color==="cyan")?`rgba(0,255,255,${alpha})`:`rgba(255,70,100,${alpha})`;
    ctx.fill();
  }
  requestAnimationFrame(animate);
}
animate();

canvas.addEventListener("click",()=>{
  if(song.paused){ song.play(); showLabel("PAUSE MUSIC"); }
  else { song.pause(); showLabel("PLAY MUSIC"); }
});

function showLabel(txt){
  label.textContent=txt;
  label.classList.add("show");
  setTimeout(()=>label.classList.remove("show"),3000);
}
</script>


<style>
  .carousel-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
  }

  .carousel-box {
    position: relative;
    overflow: hidden;
  }
</style>
  
<div class="carousel">
  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">babe🌹</div>
      <div class="num">01</div>
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">I want to tell you Something😶</div>
      <div class="num">02</div>
       <img src="./images/y.jpg" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">Please Keep Dragging😶‍🌫️</div>
      <div class="num">03</div>
		<img src="./images/a.jpg" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">You are Amazing🤩</div>
      <div class="num">04</div>
      <img src="./images/1.jpg" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">Most Beautiful Person on Earth💯</div>
      <div class="num">05</div>
      <img src="./images/2.jpg" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">And Cutest🎀</div>
      <div class="num">06</div>
      <img src="./images/3.jpg" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">And Since I met You🫠</div>
      <div class="num">07</div>
      <img src="./images/4.png" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">I feel very Lucky Everyday😇</div>
      <div class="num">08</div>
      <img src="./images/5.jpg" />
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">ur my peace, my joy ,my everything💖</div>
      <div class="num">09</div>
      <video class="carousel-video" autoplay loop muted playsinline>
          <source src="./images/t.mp4" type="video/mp4">
        </video>
    </div>
  </div>

  <div class="carousel-item">
    <div class="carousel-box">
      <div class="title">Happy🎈birthday</div>
      <div class="num">10</div>
      <img src="./images/7.jpg"/>
    </div>
  </div>
</div>

<div class="carousel-item">
    <div class="carousel-box">
      <div class="title">my forever💞</div>
      <div class="num">11</div>
      <img src="./images/n.jpg"/>
    </div>
  </div>
</div>

<div class="carousel-item">
    <div class="carousel-box">
      <div class="title">I love You♥️</div>
      <div class="num">12</div>
    </div>
</div>

<div class="layout">
  <div class="box">this isn't much <br/>buhh "simplicity is the key to happiness"<br/>right?</div>
</div>

<div class="cursor"></div>
<div class="cursor cursor2"></div>

<script src="./script.js"></script>

</body>
</html>
